{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "GM Guidance Extraction",
  "description": "Schema for extracted GM guidance and storytelling advice",
  "type": "object",
  "properties": {
    "guidance_chunks": {
      "type": "array",
      "description": "List of extracted guidance chunks",
      "items": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "The extracted advice content"
          },
          "category": {
            "type": "string",
            "enum": [
              "pacing",
              "scene_types",
              "tone",
              "player_agency",
              "npc_portrayal",
              "escalation",
              "session_structure",
              "general"
            ],
            "description": "Category of the guidance"
          },
          "is_universal": {
            "type": "boolean",
            "description": "True if advice applies to any RPG, false if genre/setting-specific"
          },
          "confidence": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Confidence in the extraction (0.0 to 1.0)"
          },
          "source_quote": {
            "type": "string",
            "description": "Original quote from the source material"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Additional tags for categorization"
          }
        },
        "required": ["content", "category", "is_universal", "confidence"]
      }
    },
    "summary": {
      "type": "object",
      "properties": {
        "total_chunks": {
          "type": "integer",
          "description": "Total number of guidance chunks extracted"
        },
        "universal_count": {
          "type": "integer",
          "description": "Number of universal advice chunks"
        },
        "genre_specific_count": {
          "type": "integer",
          "description": "Number of genre-specific advice chunks"
        },
        "categories_found": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of categories found in this extraction"
        }
      }
    }
  },
  "required": ["guidance_chunks"]
}
